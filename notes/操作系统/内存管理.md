主要考什么呢？一个应用题，页面置换算法，两个选择题，一个概念题，一个问答题，是重点。块表是什么？最坏适应算法，地址重定位考的多，





### 存储器管理概述
#### 存储器结构层次

程序是以文件的方式存储在辅存上,为了执行或存取程序和数据,需要把它们放到内存上,但是在具体系统中,内存是有限的,为了支持多道程序运行和大量的数据处理,所以就是使用磁盘,磁带等容量大,价格便宜的存储器.CPU不能直接读取外存上的数据,但是内外存可以交换数据.所以需要将要处理的数据存储到内存上.

#### 存储层次结构部分
|层次结构|主要组成|
|---|---|
|第一层次|寄存器<br> 高速缓冲存储器|
|第二层次|内存<br>磁盘缓存|
|第三层次|磁盘<br>可移动存储介质|

层次越高,价格越高,访问速度越快,存储容量越低.

寄存器.高速缓冲存储器,内存,磁盘缓存都属于操作系统存储管理范围,不可长久保存数据.

磁盘,可移动存储介质属于操作系统设备管理范围,可以长久保存数据.

1. 寄存器
	访问速度最快,但是价格最昂贵,容量小,通常以字节为单位.用于加速存储访问的速度.如用于存放操作数,用作地址寄存器或变址寄存器,以加快地址变换速度等.	
2. 高速缓冲存储器
	由硬件寄存器构成,存取速度相当快
3. 内存
	内存又称作主存,用于存放进程运行时的程序和数据
4. 磁盘缓存
	磁盘的输入输出

#### 用户程序的处理过程😉

1. 系统对用户程序的处理过程
	系统对用户程序的处理分为以下几个阶段:
	1. 编译
		由编译程序将用户源代码编译成若干个目标模块.
	2. 链接
		由链接程序将编译后形成的目标代码以及它们所需的库函数链接在一起,形成一个装入模块
	3. 装入
		由装入程序将装入模块装入内存
2. 目标程序装入内存的方式
	程序只有装入内存后才能运行,
	1. 绝对装入方式
	2. 可重定位装入方式
	3. 动态运行时装入方式是在程序执行期间进行的
3. 目标程序链接
	链接程序是将经过编译或汇编后得到的一组目标模块以及它们所需的库函数装配成一个完整的装入模块.
	1. 静态链接
		就是直接把对应的调用其他函数语句改为被调用函数的地址
	2. 装入时动态链接
	3. 运行时动态链接

#### 存储空间及重定位
##### 逻辑空间和物理空间

逻辑空间是用户的编程空间,也可以理解为程序空间.逻辑地址也叫做虚地址,编程地址,CPU地址,相对地址等,逻辑空间也叫虚空间,编程空间或地址空间.一个操作数的逻辑地址就是操作数距离程序开头的距离.
物理空间是物理存储单元组成的空间,即内存空间,是由存储器总线扫描出来的空间,一个操作数加载内存的地址称为它的物理地址.

##### 重定位和地址变换

重定位是已知逻辑地址,确定物理地址.重定位有两种情况:一种是装入内存运行时,必须根据所分得的空间的位置,将程序的逻辑地址转换为物理地址,以便将程序定位在对应的物理空间内.另一种是在程序运行中由于某种原因导致的其内存位置改变,需要将程序在内存中的物理地址重新变换.重定位是由地址变换实现的.
重定位分为两种:动态重定位和静态重定位.动态重定位是在程序运行期间进行的,静态重定位需要提前知道程序放在内存什么位置,将逻辑地址转换为对应的物理地址.
重定位的计算方式:
                   物理地址=程序加载内存的起始位置+逻辑地址

### 分区存储管理

基本的内存管理方式包括分区存储管理方式,页式存储管理方式和段式存储管理方式.
分区存储管理的基本思想是:将内存空间分为一个或若干个连续的区域(简称分区),每个分区中可以存放一个独立的用户程序.分区的特点是将一个程序连续地加载内存,根据分区划分的特点,将分区管理方式分为以下几种不同的类型:单一分区,固定分区,可变分区和可重定位分区.

#### 单道程序的连续分配

对于单用户,单任务的操作系统使用.系统内存分为系统区和用户区.
1. 系统区
系统区一般位于内存的低地址区域,包括中断向量.
2. 用户区
用户区是指操作系统所占区域以外的全部内存空间,为避免用户程序运行时访问了操作系统所占空间,将用户程序严格控制在用户区,称为存储保护,保护措施主要由硬件实现.

单一连续分配方式的优点是:实现简单,不需要复杂的软件和硬件支持;缺点是:不允许多个进程并发操作,仅支持单任务;存在内存碎片问题,资源利用率低.

#### 固定分区分配方式

固定分区分配方式,操作系统在启动时就划分好分区个数,大小和起始地址,在程序运行期间,整个操作系统的分区不再变化.用户划分几个区,就允许几道程序并发运行.
一旦一个区域分配给某个作业后,剩余的空间便不能再被使用,称为程序的内碎片;一个作业加载到内存时,如果内存中的分区长度小于作业程序的长度,则该程序无法装入,此时称该分区为外碎片.
分区有两种方案:
1. 分区大小相等
2. 分区大小不等

#### 动态分区分配

动态分区,进程使用完后释放所占用的空间.释放的空间可以和周围空闲空间合并为更大的空间.
动态分区分配需要考虑的问题:分区分配的数据结构,分区分配算法和分区分配与回收.
##### 分区分配的数据结构
1. 空闲分区表 MAT
2. 空闲分区链表
##### 分区分配算法
1. 首次适应算法 First Fit
	总是从最低开始向最高地址找寻是否有合适的地址,直到找到符合要求的自由块.如果系统采用这种算法,为了提高内存分配速度,最好将表项按照起始地址从小到大排序.
2. 循环首次适应算法 Next Fit
	是从首次适应算法演变而来的,需要设置一个起始指针,指针指向上次分配空间的位置.分配时不再是从链首开始找,而是从上次分配空间的位置开始找,然后从这个位置开始向下找,找到最后如果未找到,再回到第一个空闲分区继续找.找到后将指针定位到找到的位置.该算法可以让内存分配更均匀,减少开销,但是会缺乏大的空闲分区(因为会导致小分区比较分散,分区释放后不能合成大分区).
3. 最佳适应算法 Best Fit
	要求将自由块按照从小到大排序,然后分配内存时从头开始寻找,直到找到第一个满足要求的自由块.找到的刚好是最合适的,所以是最佳适应算法.空闲分区表应该按照分区大小由小到大的顺序排序.
4. 最坏适应算法 Worst Ft
	数据结构和算法同Best It,但是分配空间不是从小往大查,而是从大往小查,先找到自由块最大者.空闲分区表应该按照分区大小由大到小的顺序排序.
复杂度:四个算法都要排序 这一点都一样,
查找上:最坏适应算法最快,但是在考虑内存使用方面,首次适应最快.最佳适应算法有更好的内存利用率,但是实际情况是要花费更多的时间.实际系统中,首次适应算法用的最多.

##### 分区分配和回收

1. 分配内存
	
2. 回收内存
	检查有无邻接的空闲区,有则合并,使之成为连续的空闲区

#### 可重定位分区
### 页式存储管理
#### 页式存储管理思想
#### 页式存储管理的数据结构
#### 页式存储管理的重定位
#### 快表
#### 两级和多级页表
### 段式存储管理
#### 段式存储管理思想
#### 段页式存储管理
### 虚拟存储器

#### 局部性原理

(1) 程序在执行时,除少部分的转移和过程调用外.大多数顺序执行.
(2) 过程调用将会使程序的执行轨迹从一部分区域转到另一部分区域.程序将在一段时间内在这些过程内运行
(3)程序中存在许多循环结构，它们有少数指令组成，但多次执行。
(4)程序中还包括许多对数据结构的处理。当对数组进行操作时，往往局限于很小的范围。
局限性又表现在：
(1)时间的局限性。即程序中某条指令一旦执行，不久又可能执行。某个数据结构被访问不久又可能被访问。
(2)空间的局限性。一旦某个存储单元被访问，在不久后很快又会被访问。
程序执行过程中，动态的部分的加载内存。

#### 对换

所谓“对换”，是指把内存中暂时不能运行的进程或者暂时不用的程序和数据，调出到外存上，再把已具备运行条件的进程或进程所需要的程序和数据，调入内存。
在具有对换功能的OS中，通常把外存分为文件区和对换区。文件区用于存放文件，对换区用于存放从内存换出的进程。
进程的换出与换入
（1）进程的换出。每当一进程由于创建子进程而需要更多的内存空间，但又无足够的内存空间等情况发生时，系统应将某进程换出。
（2）进程的换入。系统应定时查看所有进程的状态，从中找出“就绪”状态但已换出的进程，将其中换出时间最久的进程作为换入进程，将之换入，直至已无可换入的进程或无可换出的进程为止。

#### 覆盖
覆盖技术就是将一个大程序按程序的逻辑结构划分成若干个程序段或数据段。

#### 虚拟存储器

（1）基于局部性原理，作业在装入前，没必要一次性装入，仅将当前要运行的部分装入即可，其余的仍存放在磁盘上； 
（2）程序要访问的页如果未装入内存，则运行时将它们装入到内存，继续执行；
（3）若内存已满，则对换或覆盖；
虚拟存储器的实现方法有两种：请求分页系统和请求分段系统两大类。
（1）请求分页系统
 它是在分页系统的基础上，增加了请求调页的功能、页面置换功能所形成的页式虚拟存储系统。
在请求调页和置换时，需要如下系统结构的支持：
1）请求分页系统；
2）缺页中断机构；
3）地址变换机构；
（2）请求分段系统
请求分段系统是在分段存储管理的方式的基础上增加了请求调段及分段置换功能而形成的段式虚拟存储系统。它允许只装入部分程序和数据，其他的运行时动态调入。
实现请求分段需要以下的机构支持：
1）请求分段的段表机制。
2）缺段中断机构。
3）地址变换机构。

虚拟存储器的特征:
最重要的特征是虚拟性。
（1）虚拟性。虚拟性是指能够从逻辑上扩充内存容量，使用户所看到的内存容量远大于实际的内存容量。
（2）离散性。离散性是指内存分配时采用离散分配的方式，没有离散性就不可能实现虚拟存储器。
（3）多次性。多次性是指一个作业被分成多次调入内存运行。
（4）对换性。对换性是指允许在作业运行过程中换进换出。

### 请求分页内存管理
#### 请求分页的实现
#### 内存分配
### 页面置换算法
#### 先进先出页面置换算法 FIFO
#### 最近最久未使用页面置换算法 LU
#### 最佳置换算法 
#### 时钟置换算法
#### 抖动与工作集
### 请求分段存储管理
#### 请求分段的原理和硬件支持
#### 段的共享与保护
#### 段的共享与保护的实现
